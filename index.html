<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­¸ç”Ÿæœƒç·šä¸Šæ‰“å¡ç³»çµ±</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f4f4f9; color: #333; line-height: 1.6; margin: 0; padding: 0; }
        .container { max-width: 550px; margin: 30px auto; padding: 20px; text-align: center; border: 1px solid #ccc; border-radius: 10px; box-shadow: 0 0 15px rgba(0, 0, 0, 0.2); background-color: #fff; }
        h1 { color: #007bff; margin-bottom: 20px; }
        h2 { color: #333; margin-bottom: 15px; }
        input[type="password"], input[type="text"], input[type="date"] { width: calc(100% - 20px); padding: 12px; margin: 10px 0; border: 1px solid #aaa; border-radius: 5px; box-sizing: border-box; font-size: 16px; }
        button { background-color: #007bff; color: white; padding: 12px 15px; border: none; border-radius: 5px; cursor: pointer; font-size: 17px; width: 100%; box-sizing: border-box; margin-top: 10px; transition: background-color 0.3s; }
        .stage { margin-bottom: 25px; padding: 20px; border: 1px dashed #ddd; border-radius: 8px; background-color: #fafafa; }
        .hidden { display: none !important; }
        .error-message { color: red; margin-top: 15px; font-weight: bold; }
        .result-box { background-color: #e9ecef; padding: 20px; border-radius: 8px; text-align: left; margin-top: 20px; border-left: 5px solid #28a745; }
        
        .section-grid { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 10px; 
            text-align: left; 
            padding: 15px; 
            background: #eee; 
            border-radius: 5px; 
            margin-top: 10px; 
        }
        .section-grid label { font-size: 14px; cursor: pointer; display: flex; align-items: center; }
        .section-grid input { width: auto; margin-right: 5px; }

        .button-group { display: flex; gap: 10px; margin-top: 10px; }
        .button-group button { flex: 1; margin-top: 0; }
        .query-btn { background-color: #28a745 !important; }
        .cancel-btn { background-color: #dc3545 !important; }
        .back-btn { background-color: #6c757d !important; }
        #history-list-container { max-height: 300px; overflow-y: auto; background: white; border: 1px solid #ddd; border-radius: 5px; margin-top: 10px; }
        
        /* æ‰¹é‡æ‰“å¡æ¨™ç±¤æ¨£å¼ */
        .date-tag { display: inline-block; background: #007bff; color: white; padding: 4px 10px; border-radius: 20px; margin: 4px; font-size: 14px; }
        .date-tag span { margin-left: 8px; cursor: pointer; font-weight: bold; }
        .footer-copyright { position: fixed; bottom: 5px; right: 10px; font-size: 12px; color: #ccc; opacity: 0.7; }
    </style>
</head>
<body>

    <div class="container">
        <h1>å­¸ç”Ÿæœƒç·šä¸Šæ‰“å¡</h1>

        <div id="password-stage" class="stage">
            <h2>ğŸ”‘ è«‹è¼¸å…¥æ‚¨çš„å°ˆå±¬å¯†èª</h2>
            <input type="password" id="password-input" placeholder="è¼¸å…¥æ‚¨çš„å°ˆå±¬å¯†èª...">
            
            <div id="auto-section-status" style="margin-bottom: 10px; color: #28a745; font-weight: bold;">
                ğŸŸ¢ ç›®å‰æ¨¡å¼ï¼šè‡ªå‹•ç¯€æ¬¡åˆ¤æ–·
            </div>

            <div id="manual-section-stage" class="hidden">
                <input type="date" id="manual-date-input">
                <div class="section-grid">
                    <label><input type="checkbox" name="manual_section" value="å‡æ——"> å‡æ——</label>
                    <label><input type="checkbox" name="manual_section" value="ç¬¬ 1 ç¯€"> ç¬¬ 1 ç¯€</label>
                    <label><input type="checkbox" name="manual_section" value="ç¬¬ 2 ç¯€"> ç¬¬ 2 ç¯€</label>
                    <label><input type="checkbox" name="manual_section" value="ç¬¬ 3 ç¯€"> ç¬¬ 3 ç¯€</label>
                    <label><input type="checkbox" name="manual_section" value="ç¬¬ 4 ç¯€"> ç¬¬ 4 ç¯€</label>
                    <label><input type="checkbox" name="manual_section" value="åˆä¼‘"> åˆä¼‘</label>
                    <label><input type="checkbox" name="manual_section" value="ç¬¬ 5 ç¯€"> ç¬¬ 5 ç¯€</label>
                    <label><input type="checkbox" name="manual_section" value="ç¬¬ 6 ç¯€"> ç¬¬ 6 ç¯€</label>
                    <label><input type="checkbox" name="manual_section" value="ç¬¬ 7 ç¯€"> ç¬¬ 7 ç¯€</label>
                    <label><input type="checkbox" name="manual_section" value="ç¬¬ 8 ç¯€"> ç¬¬ 8 ç¯€</label>
                </div>
            </div>
            
            <div class="button-group">
                <button onclick="checkPassword()">ç¢ºèªæ‰“å¡</button>
                <button class="query-btn" onclick="queryHistory()">ğŸ” æŸ¥è©¢ç´€éŒ„</button>
            </div>

            <button style="background-color: #6f42c1;" onclick="showBatchStage()">ğŸ“… æ‰¹é‡è£œæ‰“å¡æ¨¡å¼</button>
            <button style="background-color: #17a2b8;" onclick="toggleManualMode()">åˆ‡æ›æ‰‹å‹•/è‡ªå‹•æ¨¡å¼</button>
            <button style="background-color: #ffc107; color: #333;" onclick="showInfoStage()">ğŸ†• ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Ÿæˆ‘è¦å»ºæª”</button>
            <button style="background-color: #343a40;" onclick="window.location.href='admin.html'">âš™ï¸ ç®¡ç†å“¡å¾Œå°</button>
            
            <p id="password-error" class="error-message"></p>
        </div>

        <div id="batch-stage" class="stage hidden">
            <h2>ğŸ“… æ‰¹é‡è£œæ‰“å¡</h2>
            <p style="font-size: 14px; color: #666;">é¸æ“‡æ—¥æœŸä¸¦é»æ“Šæ–°å¢ï¼Œå¯é¸æ“‡å¤šå€‹æ—¥æœŸã€‚</p>
            
            <input type="date" id="batch-date-picker">
            <button type="button" style="background-color: #28a745; margin-bottom: 10px;" onclick="addDateToList()">â• æ–°å¢æ—¥æœŸ</button>
            
            <div id="selected-dates-display" style="min-height: 40px; border: 1px solid #eee; padding: 10px; background: #fff; margin-bottom: 15px; border-radius: 5px;">
                <span style="color: #999;">å°šæœªé¸æ“‡æ—¥æœŸ</span>
            </div>

            <div class="section-grid">
                <label><input type="radio" name="batch_section" value="å‡æ——"> å‡æ——</label>
                <label><input type="radio" name="batch_section" value="ç¬¬ 1 ç¯€"> ç¬¬ 1 ç¯€</label>
                <label><input type="radio" name="batch_section" value="ç¬¬ 2 ç¯€"> ç¬¬ 2 ç¯€</label>
                <label><input type="radio" name="batch_section" value="ç¬¬ 3 ç¯€"> ç¬¬ 3 ç¯€</label>
                <label><input type="radio" name="batch_section" value="ç¬¬ 4 ç¯€"> ç¬¬ 4 ç¯€</label>
                <label><input type="radio" name="batch_section" value="åˆä¼‘"> åˆä¼‘</label>
                <label><input type="radio" name="batch_section" value="ç¬¬ 5 ç¯€"> ç¬¬ 5 ç¯€</label>
                <label><input type="radio" name="batch_section" value="ç¬¬ 6 ç¯€"> ç¬¬ 6 ç¯€</label>
                <label><input type="radio" name="batch_section" value="ç¬¬ 7 ç¯€"> ç¬¬ 7 ç¯€</label>
                <label><input type="radio" name="batch_section" value="ç¬¬ 8 ç¯€"> ç¬¬ 8 ç¯€</label>
            </div>

            <div class="button-group">
                <button onclick="submitBatchCheckIn()">ğŸš€ é–‹å§‹æ‰¹é‡æ‰“å¡</button>
                <button class="cancel-btn" onclick="closeBatchStage()">è¿”å›</button>
            </div>
        </div>

<div id="query-result-stage" class="stage hidden">
    <h2>ğŸ“‹ æ‚¨çš„æ‰“å¡æ­·å²ç´€éŒ„</h2>

    <div class="result-box" style="margin-bottom: 15px; border-left: 5px solid #007bff; background-color: #f0f7ff;">
        <p><strong>åŸºæœ¬è³‡æ–™ç¢ºèªï¼š</strong></p>
        <p>ç­ç´šï¼š<span id="query-display-class">è¼‰å…¥ä¸­...</span></p>
        <p>å§“åï¼š<span id="query-display-name">è¼‰å…¥ä¸­...</span></p>
        <p>å­¸è™Ÿï¼š<span id="query-display-student-id">è¼‰å…¥ä¸­...</span></p>
    </div>

    <div id="history-list-container"></div>
    <button class="back-btn" onclick="closeQuery()">â¬…ï¸ è¿”å›æ‰“å¡</button>
</div>

        <div id="info-stage" class="stage hidden">
            <h2>ğŸ“ é¦–æ¬¡å»ºæª”</h2>
            <form id="info-form">
                <input type="password" id="personal-password-input" required placeholder="è¨­å®š 6 ä½æ•¸ä»¥ä¸Šå¯†èª">
                <input type="text" id="class-input" required placeholder="ç­ç´š">
                <input type="text" id="name-input" required placeholder="å§“å">
                <input type="text" id="student-id-input" required placeholder="å­¸è™Ÿ">
                <button type="submit">âœ… å®Œæˆå»ºæª”ä¸¦æ‰“å¡</button>
            </form>
            <button class="cancel-btn" onclick="resetData()">å–æ¶ˆ</button>
        </div>

        <div id="success-stage" class="stage hidden">
            <h2>âœ… æ‰“å¡æˆåŠŸï¼</h2>
            <div class="result-box">
                <p>ç­ç´šï¼š<span id="display-class"></span></p>
                <p>å§“åï¼š<span id="display-name"></span></p>
                <p>å­¸è™Ÿï¼š<span id="display-student-id"></span></p>
                <p>æ—¥æœŸï¼š<span id="display-date"></span></p>
                <p>ç¯€æ¬¡ï¼š<span id="display-section"></span></p>
                <p>æ™‚é–“ï¼š<span id="display-timestamp"></span></p>
            </div>
            <button onclick="resetData()">â¬…ï¸ è¿”å›</button>
        </div>
    </div>

    <div class="footer-copyright">Power by Ericqw</div>
    <script src="script.js" type="module"></script>
</body>
</html>

