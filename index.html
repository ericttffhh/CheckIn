<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­¸ç”Ÿæœƒç·šä¸Šæ‰“å¡ç³»çµ±</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f4f4f9; color: #333; line-height: 1.6; margin: 0; padding: 0; }
        .container { max-width: 550px; margin: 30px auto; padding: 20px; text-align: center; border: 1px solid #ccc; border-radius: 10px; box-shadow: 0 0 15px rgba(0, 0, 0, 0.2); background-color: #fff; }
        h1 { color: #007bff; margin-bottom: 20px; }
        h2 { color: #333; margin-bottom: 15px; }
        input[type="password"], input[type="text"], input[type="date"] { width: calc(100% - 20px); padding: 12px; margin: 10px 0; border: 1px solid #aaa; border-radius: 5px; box-sizing: border-box; font-size: 16px; }
        button { background-color: #007bff; color: white; padding: 12px 15px; border: none; border-radius: 5px; cursor: pointer; font-size: 17px; width: 100%; box-sizing: border-box; margin-top: 10px; transition: background-color 0.3s; }
        .stage { margin-bottom: 25px; padding: 20px; border: 1px dashed #ddd; border-radius: 8px; background-color: #fafafa; }
        .hidden { display: none !important; }
        .error-message { color: red; margin-top: 15px; font-weight: bold; }
        .result-box { background-color: #e9ecef; padding: 20px; border-radius: 8px; text-align: left; margin-top: 20px; border-left: 5px solid #28a745; }
        .password-controls-row { display: flex; gap: 2%; margin-top: 15px; }
        .password-controls-row button { width: 49%; margin: 0; }
        .mode-switch-button { background-color: #17a2b8 !important; }
        .query-button { background-color: #28a745 !important; }
        .admin-button { background-color: #6c757d !important; }
        .new-user-button { background-color: #ffc107; color: #333; margin-top: 15px; }
        .history-item { border-bottom: 1px solid #eee; padding: 10px 0; text-align: left; font-size: 0.9em; }
        .footer-copyright { position: fixed; bottom: 5px; right: 10px; font-size: 12px; color: #ccc; opacity: 0.7; }
        .section-selector { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; padding: 15px; background-color: #f0f0f0; border-radius: 5px; margin-top: 15px; text-align: left; }
    </style>
</head>
<body>

    <div class="container">
        <h1>å­¸ç”Ÿæœƒç·šä¸Šæ‰“å¡</h1>

        <div id="password-stage" class="stage">
            <h2>ğŸ”‘ è«‹è¼¸å…¥æ‚¨çš„å°ˆå±¬å¯†èª</h2>
            <input type="password" id="password-input" placeholder="è¼¸å…¥æ‚¨çš„å°ˆå±¬å¯†èª...">
            
            <div id="auto-section-status" style="margin-bottom: 10px; color: #28a745; font-weight: bold;">
                ğŸŸ¢ ç›®å‰æ¨¡å¼ï¼šè‡ªå‹•ç¯€æ¬¡åˆ¤æ–·
            </div>

            <div id="manual-section-stage" class="hidden">
                <div style="margin-bottom: 10px;">
                    <label>ğŸ—“ï¸ é¸æ“‡æ—¥æœŸï¼š</label>
                    <input type="date" id="manual-date-input">
                </div>
                <div class="section-selector">
                    <label><input type="checkbox" name="manual_section" value="ğŸš© å‡æ——"> å‡æ——</label>
                    <label><input type="checkbox" name="manual_section" value="ç¬¬ 1 ç¯€"> 1 ç¯€</label>
                    <label><input type="checkbox" name="manual_section" value="ç¬¬ 2 ç¯€"> 2 ç¯€</label>
                    <label><input type="checkbox" name="manual_section" value="ç¬¬ 3 ç¯€"> 3 ç¯€</label>
                    <label><input type="checkbox" name="manual_section" value="ç¬¬ 4 ç¯€"> 4 ç¯€</label>
                    <label><input type="checkbox" name="manual_section" value=" åˆä¼‘"> åˆä¼‘</label>
                    <label><input type="checkbox" name="manual_section" value="ç¬¬ 5 ç¯€"> 5 ç¯€</label>
                    <label><input type="checkbox" name="manual_section" value="ç¬¬ 6 ç¯€"> 6 ç¯€</label>
                    <label><input type="checkbox" name="manual_section" value="ç¬¬ 7 ç¯€"> 7 ç¯€</label>
                </div>
            </div>
            
            <div class="password-controls-row">
                <button onclick="checkPassword()">ç¢ºèªæ‰“å¡</button>
                <button class="query-button" onclick="queryHistory()">ğŸ” æŸ¥è©¢ç´€éŒ„</button>
            </div>

            <div class="password-controls-row">
                <button class="mode-switch-button" onclick="toggleManualMode()">åˆ‡æ›æ¨¡å¼</button>
                <a href="admin.html" style="width: 49%;"><button class="admin-button">å¾Œå°ç®¡ç†</button></a>
            </div>
            
            <button class="new-user-button" onclick="showInfoStage()">ğŸ†• ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Ÿæˆ‘è¦å»ºæª”</button>
            <p id="password-error" class="error-message"></p>
        </div>

        <div id="query-result-stage" class="stage hidden">
            <h2>ğŸ“‹ æ­·å²æ‰“å¡ç´€éŒ„</h2>
            <div id="history-list-container" style="max-height: 300px; overflow-y: auto; background: #fff; padding: 10px; border-radius: 5px; border: 1px solid #ddd;"></div>
            <button onclick="closeQuery()" style="background-color: #6c757d; margin-top: 15px;">â¬…ï¸ è¿”å›æ‰“å¡</button>
        </div>

        <div id="info-stage" class="stage hidden">
            <h2>ğŸ“ é¦–æ¬¡ä½¿ç”¨ï¼šå»ºç«‹è³‡æ–™</h2>
            <form id="info-form">
                <input type="password" id="personal-password-input" required placeholder="è¨­å®š 6 ä½æ•¸ä»¥ä¸Šå¯†èª">
                <input type="text" id="class-input" required placeholder="ç­ç´š (å¦‚ï¼šäºŒå­ä¹™)">
                <input type="text" id="name-input" required placeholder="å§“å">
                <input type="text" id="student-id-input" required placeholder="å­¸è™Ÿ">
                <button type="submit">âœ… å®Œæˆå»ºæª”ä¸¦æ‰“å¡</button>
            </form>
            <button onclick="resetData()" style="background-color: #dc3545; margin-top: 10px;">å–æ¶ˆ</button>
        </div>

        <div id="success-stage" class="stage hidden">
            <h2>âœ… æ‰“å¡æˆåŠŸï¼</h2>
            <div class="result-box" id="success-content"></div>
            <button onclick="resetData()" style="margin-top: 15px;">â¬…ï¸ è¿”å›é¦–é </button>
        </div>
    </div>

    <div class="footer-copyright">Power by Ericqw</div>
    <script src="script.js" type="module"></script>
</body>
</html>
